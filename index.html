<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Guapis in Love</title>
  <style>
    body { font-family: sans-serif; margin: 0; padding: 2rem; background-color: #fff0f5; color: #333; }
    .container { max-width: 600px; margin: auto; }
    h1, h2 { text-align: center; }
    .question, .result, .next { margin-top: 2rem; }
    button { padding: 1rem; background-color: #ff69b4; color: white; border: none; border-radius: 8px; cursor: pointer; margin-top: 1rem; }
    .hidden { display: none; }
    label { display: inline-block; margin-top: 0.5rem; }
    select { margin: 0.5rem 0; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Guapis in Love</h1>
    <div id="game"></div>
  </div>

  <script>
    const game = document.getElementById('game');

    // Hilfsfunktion: Array mischen
    function shuffle(array) {
      return array
        .map(value => ({ value, sort: Math.random() }))
        .sort((a, b) => a.sort - b.sort)
        .map(({ value }) => value);
    }

    const screens = [
      {
        text: 'Du hast heute einiges aus unserer Vergangenheit wieder erlebt, wir haben gelacht, und uns an einiges zur√ºck erinnert. Jetzt steht uns ein weiterer grosser Schritt bevor. Doch zuerst sollst du beweisen, wie gut du uns wirklich kennst...'
      },
      {
        question: 'Welche dieser Aussagen w√ºrde am ehesten in einem eurer Gespr√§che auftauchen?',
        options: [
          { text: 'Beziehungsorientierung bedeutet, r√ºcksicht nehmen auf die Bed√ºrfnisse aller Beteiligten, nicht nur die des Kindes.', correct: true },
          { text: 'Wenn man lange genug k√§mpft, bekommt man, was man will.', correct: false },
          { text: 'Zucker macht Kinder gl√ºcklich.', correct: false }
        ],
        comment: 'Ich bin so froh, haben wir so √§hnliche Vorstellungen was Erziehung und ein Kind zu begleiten bedeuted.'
      },
      {
        question: 'Ein Kind wird im Kindergarten unfair behandelt. Was tut ihr?',
        options: [
          { text: 'Sofort schimpfen.', correct: false },
          { text: 'Zuerst zuh√∂ren, dann vermitteln.', correct: true },
          { text: 'Ignorieren ‚Äì ist nicht euer Problem.', correct: false }
        ],
        comment: 'Empathisch wie eh und je ‚Äì so wie wir das lieben.'
      },
      {
        type: 'match',
        instruction: 'Ordne diese Begriffe den passenden Kategorien zu:',
        pairs: {
          'Salsa': 'Tanzen',
          'Take on me': 'gemeinsam Musik machen',
          'Grigri': 'Klettern'
        },
        comment: 'LOVE ‚Äì Dinge, die wir lieben, zu zweit zu machen!'
      },
      {
        question: 'Welche 3 Zutaten sind in einem typischen veganen Fr√ºhst√ºck von euch?',
        options: [
          { text: 'Haferflocken', correct: true },
          { text: 'Lachs', correct: false },
          { text: 'Beeren', correct: true },
          { text: 'Chiasamen', correct: true },
          { text: 'Kuhmilch', correct: false },
          { text: 'Croissant', correct: false }
        ],
        comment: 'Sch√∂n, dass mir deheime euse chlini vegani Safespace hend.'
      },
      {
        type: 'order',
        instruction: 'Ordne diese Ereignisse chronologisch:',
        sequence: [
          'Treffen in der Bar',
          'Minigolf-Date',
          'Kuss auf dem Sofa',
          'Ferien Surfcamp',
          'Urlaub in √Ñgypten',
          'Von unserem kleinen Wunder erfahren'
        ],
        comment: 'Alles richtig! Vom ersten Treffen bis zu unserem Wunder.'
      },
      {
        text: 'Herzlichen Gl√ºckwunsch üíõ Du hast alles erkannt. Es gibt nichts mehr zu beweisen.'
      },
      {
        text: 'Nur noch eins zu fragen...',
        final: true
      }
    ];

    let current = 0;

    function renderScreen() {
      const data = screens[current];
      game.innerHTML = '';
      const div = document.createElement('div');

      if (data.question) {
        const h2 = document.createElement('h2');
        h2.textContent = data.question;
        div.appendChild(h2);

        data.options.forEach(opt => {
          const btn = document.createElement('button');
          btn.textContent = opt.text;
          btn.onclick = () => {
            const feedback = document.createElement('p');
            feedback.textContent = opt.correct ? data.comment : 'Nicht ganz... versuch weiter!';
            div.appendChild(feedback);
            btn.disabled = true;
            const next = document.createElement('button');
            next.textContent = 'Weiter';
            next.onclick = () => {
              current++;
              renderScreen();
            };
            div.appendChild(next);
          };
          div.appendChild(btn);
        });
      } else if (data.type === 'match') {
        const instr = document.createElement('p');
        instr.textContent = data.instruction;
        div.appendChild(instr);

        const entries = Object.entries(data.pairs);
        entries.forEach(([key, val]) => {
          const label = document.createElement('label');
          label.textContent = `Wozu passt "${key}"? `;
          const select = document.createElement('select');

          const shuffledOptions = shuffle(Object.values(data.pairs));

          shuffledOptions.forEach(opt => {
            const option = document.createElement('option');
            option.value = opt;
            option.textContent = opt;
            select.appendChild(option);
          });

          div.appendChild(label);
          div.appendChild(select);
          div.appendChild(document.createElement('br'));
        });

        const submit = document.createElement('button');
        submit.textContent = '√úberpr√ºfen';
        submit.onclick = () => {
          const selects = div.querySelectorAll('select');
          let correct = true;
          selects.forEach((sel, idx) => {
            if (sel.value !== entries[idx][1]) correct = false;
          });
          const feedback = document.createElement('p');
          feedback.textContent = correct ? data.comment : 'Nicht ganz... probier es nochmals.';
          div.appendChild(feedback);
          if (correct) {
            const next = document.createElement('button');
            next.textContent = 'Weiter';
            next.onclick = () => {
              current++;
              renderScreen();
            };
            div.appendChild(next);
          }
        };
        div.appendChild(submit);
      } else if (data.type === 'order') {
        const instr = document.createElement('p');
        instr.textContent = data.instruction;
        div.appendChild(instr);

        const selects = [];

        for (let i = 0; i < data.sequence.length; i++) {
          const label = document.createElement('label');
          label.textContent = `Platz ${i + 1}: `;
          const select = document.createElement('select');

          const empty = document.createElement('option');
          empty.value = "";
          empty.textContent = "‚Äì";
          select.appendChild(empty);

          const shuffledOptions = shuffle(data.sequence);

          shuffledOptions.forEach(opt => {
            const option = document.createElement('option');
            option.value = opt;
            option.textContent = opt;
            select.appendChild(option);
          });

          selects.push(select);
          div.appendChild(label);
          div.appendChild(select);
          div.appendChild(document.createElement('br'));
        }

        const submit = document.createElement('button');
        submit.textContent = '√úberpr√ºfen';
        submit.onclick = () => {
          const chosen = selects.map(sel => sel.value);
          const correct = JSON.stringify(chosen) === JSON.stringify(data.sequence);
          const feedback = document.createElement('p');
          feedback.textContent = correct ? data.comment : 'Die Reihenfolge stimmt (noch) nicht ‚Äì versuch‚Äôs nochmal.';
          div.appendChild(feedback);

          if (correct) {
            const next = document.createElement('button');
            next.textContent = 'Weiter';
            next.onclick = () => { current++; renderScreen(); };
            div.appendChild(next);
          }
        };
        div.appendChild(submit);
      } else if (data.text) {
        const p = document.createElement('p');
        p.textContent = data.text;
        div.appendChild(p);
        const next = document.createElement('button');
        next.textContent = data.final ? 'Antwort anzeigen' : 'Weiter';
        next.onclick = () => {
          if (data.final) {
            const proposal = document.createElement('h2');
            proposal.textContent = 'Wetsch du mich h√ºrate? üíç';
            div.appendChild(proposal);
          } else {
            current++;
            renderScreen();
          }
        };
        div.appendChild(next);
      }

      game.appendChild(div);
    }

    renderScreen();
  </script>
</body>
</html>
